# 営業日報システム テスト仕様書

## 目次

1. [テスト概要](#1-テスト概要)
2. [テスト方針](#2-テスト方針)
3. [テスト環境](#3-テスト環境)
4. [単体テスト](#4-単体テスト)
5. [結合テスト](#5-結合テスト)
6. [システムテスト](#6-システムテスト)
7. [受け入れテスト](#7-受け入れテスト)
8. [非機能テスト](#8-非機能テスト)
9. [テストデータ](#9-テストデータ)

---

## 1. テスト概要

### 1.1 目的

営業日報システムが要件定義書に記載された機能要件および非機能要件を満たしていることを検証する。

### 1.2 テスト対象

- フロントエンド（Web画面）
- バックエンド（RESTful API）
- データベース
- 認証・認可機能
- 外部連携（該当する場合）

### 1.3 テストレベル

| テストレベル   | 実施者      | 目的                                 |
| -------------- | ----------- | ------------------------------------ |
| 単体テスト     | 開発者      | 個別のコンポーネント・関数の動作確認 |
| 結合テスト     | 開発者/QA   | コンポーネント間の連携確認           |
| システムテスト | QA          | システム全体の機能確認               |
| 受け入れテスト | ユーザー/QA | 業務要件の充足確認                   |

---

## 2. テスト方針

### 2.1 テスト戦略

- **リスクベーステスト**: 重要度・影響度の高い機能を優先的にテスト
- **境界値分析**: 入力値の境界でのテストを実施
- **同値分割**: 有効な入力と無効な入力でテストケースを作成
- **状態遷移テスト**: 画面遷移や状態変化を検証

### 2.2 テスト優先順位

| 優先度 | 対象機能                                 |
| ------ | ---------------------------------------- |
| 高     | 認証・認可、日報作成・編集、データ整合性 |
| 中     | 検索・一覧表示、マスタ管理               |
| 低     | UI/UX改善項目、将来拡張機能              |

### 2.3 合格基準

- **単体テスト**: コードカバレッジ80%以上
- **結合テスト**: 全テストケース実施、重大バグ0件
- **システムテスト**: 全テストケース実施、致命的バグ0件、重大バグ0件
- **受け入れテスト**: ユーザー承認取得

### 2.4 バグ分類

| 深刻度 | 説明                           | 対応             |
| ------ | ------------------------------ | ---------------- |
| 致命的 | システム全体が停止、データ損失 | 即座に修正       |
| 重大   | 主要機能が使用不可             | 優先的に修正     |
| 中     | 一部機能に支障、回避策あり     | 計画的に修正     |
| 軽微   | UI/UXの問題、誤字脱字          | 必要に応じて修正 |

---

## 3. テスト環境

### 3.1 ハードウェア環境

| 項目         | 仕様                               |
| ------------ | ---------------------------------- |
| サーバー     | AWS EC2 t3.medium (2vCPU, 4GB RAM) |
| データベース | AWS RDS MySQL 8.0                  |
| ストレージ   | 50GB SSD                           |

### 3.2 ソフトウェア環境

| 項目                     | バージョン                                |
| ------------------------ | ----------------------------------------- |
| OS                       | Ubuntu 22.04 LTS                          |
| Webサーバー              | Nginx 1.22                                |
| アプリケーションサーバー | Node.js 20.x / Python 3.11                |
| データベース             | MySQL 8.0                                 |
| ブラウザ                 | Chrome 最新版、Safari 最新版、Edge 最新版 |

### 3.3 テストツール

| ツール         | 用途                         |
| -------------- | ---------------------------- |
| Jest           | フロントエンドユニットテスト |
| pytest         | バックエンドユニットテスト   |
| Postman/Newman | API自動テスト                |
| Selenium       | E2Eテスト自動化              |
| JMeter         | 負荷テスト                   |
| OWASP ZAP      | セキュリティテスト           |

---

## 4. 単体テスト

### 4.1 バックエンド単体テスト

#### 4.1.1 日報作成API (`POST /api/daily-reports`)

| テストケースID | テスト項目               | 入力値                    | 期待結果                          | 優先度 |
| -------------- | ------------------------ | ------------------------- | --------------------------------- | ------ |
| UT-API-001     | 正常系: 日報作成成功     | report_date: "2026-02-01" | 201 Created、日報オブジェクト返却 | 高     |
| UT-API-002     | 異常系: 報告日未入力     | report_date: null         | 422 Validation Error              | 高     |
| UT-API-003     | 異常系: 重複日報作成     | 既存の報告日              | 422 Duplicate Resource            | 高     |
| UT-API-004     | 異常系: 認証トークンなし | Authorizationヘッダーなし | 401 Unauthorized                  | 高     |
| UT-API-005     | 境界値: 未来の日付       | report_date: "2027-01-01" | 201 Created                       | 中     |
| UT-API-006     | 境界値: 過去の日付       | report_date: "2020-01-01" | 201 Created                       | 中     |

#### 4.1.2 訪問記録追加API (`POST /api/daily-reports/{id}/visit-records`)

| テストケースID | テスト項目                       | 入力値                                         | 期待結果             | 優先度 |
| -------------- | -------------------------------- | ---------------------------------------------- | -------------------- | ------ |
| UT-API-010     | 正常系: 訪問記録追加成功         | customer_id: 10, visit_content: "訪問しました" | 201 Created          | 高     |
| UT-API-011     | 異常系: 顧客ID未選択             | customer_id: null                              | 422 Validation Error | 高     |
| UT-API-012     | 異常系: 訪問内容未入力           | visit_content: ""                              | 422 Validation Error | 高     |
| UT-API-013     | 異常系: 訪問内容超過             | visit_content: 1001文字                        | 422 Validation Error | 中     |
| UT-API-014     | 境界値: 訪問内容1000文字         | visit_content: 1000文字                        | 201 Created          | 中     |
| UT-API-015     | 異常系: 終了時刻が開始時刻より前 | start: "10:00", end: "09:00"                   | 422 Validation Error | 高     |
| UT-API-016     | 異常系: 存在しない顧客ID         | customer_id: 99999                             | 404 Not Found        | 高     |
| UT-API-017     | 異常系: 他人の日報に追加         | 他ユーザーの日報ID                             | 403 Forbidden        | 高     |

#### 4.1.3 コメント追加API (`POST /api/problems/{id}/comments`)

| テストケースID | テスト項目                     | 入力値                                | 期待結果             | 優先度 |
| -------------- | ------------------------------ | ------------------------------------- | -------------------- | ------ |
| UT-API-020     | 正常系: 上長がコメント追加     | 上長アカウント、content: "承認します" | 201 Created          | 高     |
| UT-API-021     | 異常系: 一般営業がコメント追加 | 一般アカウント                        | 403 Forbidden        | 高     |
| UT-API-022     | 異常系: コメント内容未入力     | content: ""                           | 422 Validation Error | 高     |
| UT-API-023     | 異常系: コメント内容超過       | content: 1001文字                     | 422 Validation Error | 中     |
| UT-API-024     | 境界値: コメント内容1000文字   | content: 1000文字                     | 201 Created          | 中     |

### 4.2 フロントエンド単体テスト

#### 4.2.1 日報一覧画面コンポーネント

| テストケースID | テスト項目           | 期待結果                           | 優先度 |
| -------------- | -------------------- | ---------------------------------- | ------ |
| UT-FE-001      | 一覧データ表示       | API取得データが正しく表示される    | 高     |
| UT-FE-002      | ページネーション動作 | ページ切り替えで正しいデータ取得   | 中     |
| UT-FE-003      | ソート機能           | カラムクリックでソートが動作       | 中     |
| UT-FE-004      | 検索フィルター       | 検索条件で絞り込みが動作           | 高     |
| UT-FE-005      | ローディング表示     | データ取得中にローディング表示     | 低     |
| UT-FE-006      | エラー表示           | API エラー時にエラーメッセージ表示 | 高     |

#### 4.2.2 日報詳細・編集画面コンポーネント

| テストケースID | テスト項目                 | 期待結果                     | 優先度 |
| -------------- | -------------------------- | ---------------------------- | ------ |
| UT-FE-010      | 日報データ表示             | 詳細データが正しく表示される | 高     |
| UT-FE-011      | 訪問記録追加ダイアログ表示 | ダイアログが正しく開く       | 高     |
| UT-FE-012      | 訪問記録保存               | API呼び出しと画面更新が動作  | 高     |
| UT-FE-013      | バリデーションエラー表示   | 入力エラー時にメッセージ表示 | 高     |
| UT-FE-014      | 削除確認ダイアログ         | 削除時に確認ダイアログ表示   | 中     |
| UT-FE-015      | 権限による表示制御         | 上長のみコメント欄表示       | 高     |

---

## 5. 結合テスト

### 5.1 API結合テスト

#### 5.1.1 日報作成から訪問記録追加までの一連の流れ

| テストケースID | テスト項目                        | 手順                                                | 期待結果                     | 優先度 |
| -------------- | --------------------------------- | --------------------------------------------------- | ---------------------------- | ------ |
| IT-API-001     | 日報作成→訪問記録追加             | 1. 日報作成<br>2. 訪問記録追加                      | 両方成功、データ整合性確認   | 高     |
| IT-API-002     | 日報作成→Problem追加→コメント追加 | 1. 日報作成<br>2. Problem追加<br>3. 上長がコメント  | すべて成功、リレーション確認 | 高     |
| IT-API-003     | 日報削除時のカスケード削除        | 1. 日報に訪問記録・Problem・Plan追加<br>2. 日報削除 | 関連データも削除される       | 高     |

#### 5.1.2 検索・フィルタリング機能

| テストケースID | テスト項目           | 検索条件               | 期待結果                         | 優先度 |
| -------------- | -------------------- | ---------------------- | -------------------------------- | ------ |
| IT-API-010     | 日付範囲検索         | 2026/01/01～2026/01/31 | 該当期間の日報のみ取得           | 高     |
| IT-API-011     | 営業担当者フィルター | sales_id: 1            | 該当営業の日報のみ取得           | 高     |
| IT-API-012     | 顧客フィルター       | customer_id: 10        | 該当顧客の訪問記録を含む日報取得 | 中     |
| IT-API-013     | 複合条件検索         | 日付 + 営業 + 顧客     | すべての条件を満たす日報取得     | 高     |

### 5.2 画面結合テスト

#### 5.2.1 画面遷移テスト

| テストケースID | テスト項目                   | 遷移経路                       | 期待結果             | 優先度 |
| -------------- | ---------------------------- | ------------------------------ | -------------------- | ------ |
| IT-UI-001      | ログイン→日報一覧            | ログイン成功後に日報一覧表示   | 正しく遷移           | 高     |
| IT-UI-002      | 日報一覧→詳細→一覧           | 一覧から詳細、戻るボタンで一覧 | 検索条件が保持される | 中     |
| IT-UI-003      | 日報詳細→顧客マスタ→日報詳細 | 新規顧客登録後に日報に反映     | 新顧客が選択可能     | 中     |

#### 5.2.2 データ整合性テスト

| テストケースID | テスト項目                   | 操作                    | 期待結果             | 優先度 |
| -------------- | ---------------------------- | ----------------------- | -------------------- | ------ |
| IT-DATA-001    | 日報作成直後の一覧反映       | 日報作成→一覧画面に戻る | 新規日報が一覧に表示 | 高     |
| IT-DATA-002    | 訪問記録追加後のカウント     | 訪問記録追加→一覧画面   | 訪問件数が増加       | 高     |
| IT-DATA-003    | コメント追加後のアイコン表示 | コメント追加→一覧画面   | コメントアイコン表示 | 中     |

---

## 6. システムテスト

### 6.1 機能テスト

#### 6.1.1 認証・認可機能

| テストケースID | テスト項目           | 操作                         | 期待結果                       | 優先度 |
| -------------- | -------------------- | ---------------------------- | ------------------------------ | ------ |
| ST-AUTH-001    | 正常ログイン         | 正しいメール・パスワード入力 | ログイン成功、日報一覧表示     | 高     |
| ST-AUTH-002    | ログイン失敗         | 間違ったパスワード入力       | エラーメッセージ表示           | 高     |
| ST-AUTH-003    | トークン有効期限切れ | 1時間経過後にAPI呼び出し     | 401エラー、再ログイン促進      | 高     |
| ST-AUTH-004    | トークンリフレッシュ | リフレッシュトークンで更新   | 新しいアクセストークン取得     | 高     |
| ST-AUTH-005    | ログアウト           | ログアウトボタンクリック     | ログイン画面に遷移             | 中     |
| ST-AUTH-006    | セッション保持       | ログイン状態保持にチェック   | ブラウザ再起動後もログイン状態 | 中     |

#### 6.1.2 権限制御

| テストケースID | テスト項目     | ユーザー種別 | 操作                   | 期待結果            | 優先度 |
| -------------- | -------------- | ------------ | ---------------------- | ------------------- | ------ |
| ST-PERM-001    | 自分の日報編集 | 一般営業     | 自分の日報編集         | 編集可能            | 高     |
| ST-PERM-002    | 他人の日報編集 | 一般営業     | 他人の日報編集         | 編集不可、403エラー | 高     |
| ST-PERM-003    | 部下の日報閲覧 | 上長         | 部下の日報閲覧         | 閲覧可能            | 高     |
| ST-PERM-004    | コメント投稿   | 上長         | Problem/Planにコメント | 投稿可能            | 高     |
| ST-PERM-005    | コメント投稿   | 一般営業     | Problem/Planにコメント | 投稿不可、403エラー | 高     |
| ST-PERM-006    | 顧客マスタ作成 | 一般営業     | 顧客新規作成           | 作成不可、403エラー | 中     |
| ST-PERM-007    | 顧客マスタ作成 | 管理者       | 顧客新規作成           | 作成可能            | 中     |

#### 6.1.3 日報管理機能

| テストケースID | テスト項目       | 操作                     | 期待結果                     | 優先度 |
| -------------- | ---------------- | ------------------------ | ---------------------------- | ------ |
| ST-REPORT-001  | 日報新規作成     | 報告日を指定して作成     | 空の日報が作成される         | 高     |
| ST-REPORT-002  | 重複日報作成防止 | 同じ日付で2回作成        | エラーメッセージ表示         | 高     |
| ST-REPORT-003  | 訪問記録追加     | 顧客選択、内容入力、保存 | 訪問記録が追加される         | 高     |
| ST-REPORT-004  | 訪問記録複数追加 | 3件の訪問記録追加        | すべて正しく保存             | 高     |
| ST-REPORT-005  | 訪問記録編集     | 既存の訪問記録を編集     | 変更が保存される             | 高     |
| ST-REPORT-006  | 訪問記録削除     | 訪問記録を削除           | 削除確認後に削除される       | 中     |
| ST-REPORT-007  | Problem追加      | 課題内容入力、保存       | Problemが追加される          | 高     |
| ST-REPORT-008  | Plan追加         | 予定内容入力、保存       | Planが追加される             | 高     |
| ST-REPORT-009  | 日報削除         | 日報を削除               | 削除確認後、関連データも削除 | 高     |

#### 6.1.4 コメント機能

| テストケースID | テスト項目          | 操作                     | 期待結果               | 優先度 |
| -------------- | ------------------- | ------------------------ | ---------------------- | ------ |
| ST-COMMENT-001 | Problemへのコメント | 上長がコメント入力、投稿 | コメントが表示される   | 高     |
| ST-COMMENT-002 | Planへのコメント    | 上長がコメント入力、投稿 | コメントが表示される   | 高     |
| ST-COMMENT-003 | 複数コメント        | 同じProblemに2件コメント | 両方表示される         | 中     |
| ST-COMMENT-004 | コメント編集        | 既存コメントを編集       | 変更が保存される       | 中     |
| ST-COMMENT-005 | コメント削除        | コメントを削除           | 削除確認後に削除される | 中     |
| ST-COMMENT-006 | コメント通知        | コメント投稿後           | 一覧にアイコン表示     | 低     |

#### 6.1.5 検索・一覧表示機能

| テストケースID | テスト項目       | 操作                   | 期待結果                         | 優先度 |
| -------------- | ---------------- | ---------------------- | -------------------------------- | ------ |
| ST-SEARCH-001  | 日付範囲検索     | From/To指定して検索    | 該当期間の日報のみ表示           | 高     |
| ST-SEARCH-002  | 営業担当者検索   | 特定営業を選択して検索 | 該当営業の日報のみ表示           | 高     |
| ST-SEARCH-003  | 顧客検索         | 特定顧客を選択して検索 | 該当顧客の訪問記録を含む日報表示 | 中     |
| ST-SEARCH-004  | 検索条件クリア   | クリアボタンクリック   | すべての条件がクリアされる       | 低     |
| ST-SEARCH-005  | ソート機能       | 報告日でソート         | 昇順/降順が正しく動作            | 中     |
| ST-SEARCH-006  | ページネーション | 次ページボタンクリック | 次の10件が表示される             | 中     |
| ST-SEARCH-007  | 表示対象切り替え | 自分/部下/全て切り替え | 該当データのみ表示               | 高     |

#### 6.1.6 顧客マスタ管理

| テストケースID  | テスト項目           | 操作                   | 期待結果                   | 優先度 |
| --------------- | -------------------- | ---------------------- | -------------------------- | ------ |
| ST-CUSTOMER-001 | 顧客新規作成         | 顧客情報入力、保存     | 顧客が作成される           | 中     |
| ST-CUSTOMER-002 | 顧客編集             | 既存顧客を編集         | 変更が保存される           | 中     |
| ST-CUSTOMER-003 | 顧客削除（訪問なし） | 訪問記録のない顧客削除 | 削除される                 | 中     |
| ST-CUSTOMER-004 | 顧客削除（訪問あり） | 訪問記録のある顧客削除 | エラーメッセージ、削除不可 | 高     |
| ST-CUSTOMER-005 | 顧客検索             | 顧客名で検索           | 該当顧客のみ表示           | 中     |
| ST-CUSTOMER-006 | 訪問履歴表示         | 顧客詳細画面で履歴表示 | 訪問記録が時系列表示       | 低     |

### 6.2 バリデーションテスト

#### 6.2.1 入力値検証

| テストケースID | テスト項目                   | 入力値             | 期待結果             | 優先度 |
| -------------- | ---------------------------- | ------------------ | -------------------- | ------ |
| ST-VAL-001     | 必須項目チェック（顧客）     | 顧客未選択で保存   | エラーメッセージ表示 | 高     |
| ST-VAL-002     | 必須項目チェック（訪問内容） | 訪問内容空白で保存 | エラーメッセージ表示 | 高     |
| ST-VAL-003     | 最大文字数チェック           | 訪問内容1001文字   | エラーメッセージ表示 | 中     |
| ST-VAL-004     | 境界値チェック               | 訪問内容1000文字   | 正常に保存           | 中     |
| ST-VAL-005     | 時刻妥当性チェック           | 終了<開始          | エラーメッセージ表示 | 高     |
| ST-VAL-006     | メールアドレス形式           | 不正なメール形式   | エラーメッセージ表示 | 中     |
| ST-VAL-007     | 電話番号形式                 | 不正な電話番号     | エラーメッセージ表示 | 低     |

### 6.3 エラーハンドリングテスト

| テストケースID | テスト項目         | 発生条件                      | 期待結果                     | 優先度 |
| -------------- | ------------------ | ----------------------------- | ---------------------------- | ------ |
| ST-ERROR-001   | ネットワークエラー | サーバー停止状態でAPI呼び出し | エラーメッセージ表示         | 高     |
| ST-ERROR-002   | タイムアウトエラー | 応答遅延時                    | タイムアウトメッセージ表示   | 中     |
| ST-ERROR-003   | 404エラー          | 存在しないリソースへアクセス  | Not Foundメッセージ表示      | 中     |
| ST-ERROR-004   | 500エラー          | サーバー内部エラー発生        | システムエラーメッセージ表示 | 高     |
| ST-ERROR-005   | データベースエラー | DB接続断                      | エラーメッセージ、再試行促進 | 高     |

---

## 7. 受け入れテスト

### 7.1 ユーザーシナリオテスト

#### 7.1.1 シナリオ1: 日報作成から提出まで

| ステップ | 操作                          | 期待結果               | 確認 |
| -------- | ----------------------------- | ---------------------- | ---- |
| 1        | ログイン                      | 日報一覧画面表示       | □    |
| 2        | 新規日報作成ボタンクリック    | 日報詳細画面表示（空） | □    |
| 3        | 訪問記録追加（A社訪問）       | 訪問記録が追加される   | □    |
| 4        | 訪問記録追加（B社訪問）       | 2件目の訪問記録追加    | □    |
| 5        | Problem追加（価格交渉の課題） | Problemが追加される    | □    |
| 6        | Plan追加（明日の予定）        | Planが追加される       | □    |
| 7        | 保存ボタンクリック            | 保存成功メッセージ表示 | □    |
| 8        | 一覧に戻る                    | 新規日報が一覧に表示   | □    |

#### 7.1.2 シナリオ2: 上長による日報確認とコメント

| ステップ | 操作                               | 期待結果                 | 確認 |
| -------- | ---------------------------------- | ------------------------ | ---- |
| 1        | 上長アカウントでログイン           | 日報一覧画面表示         | □    |
| 2        | 表示対象を「部下の日報」に切り替え | 部下の日報のみ表示       | □    |
| 3        | 特定の日報をクリック               | 日報詳細表示（編集不可） | □    |
| 4        | Problemにコメント追加              | コメントが投稿される     | □    |
| 5        | Planにコメント追加                 | コメントが投稿される     | □    |
| 6        | 一覧に戻る                         | コメントアイコンが表示   | □    |

#### 7.1.3 シナリオ3: 過去日報の検索・参照

| ステップ | 操作                       | 期待結果                   | 確認 |
| -------- | -------------------------- | -------------------------- | ---- |
| 1        | 日報一覧画面で検索条件入力 | -                          | □    |
| 2        | 日付範囲を先月に設定       | -                          | □    |
| 3        | 特定顧客を選択             | -                          | □    |
| 4        | 検索ボタンクリック         | 条件に合致する日報のみ表示 | □    |
| 5        | 日報をクリック             | 過去日報の詳細表示         | □    |
| 6        | 訪問履歴を確認             | 該当顧客への訪問記録確認   | □    |

### 7.2 業務要件確認

| テストケースID | 業務要件             | 確認内容                           | 確認 |
| -------------- | -------------------- | ---------------------------------- | ---- |
| UAT-001        | 複数訪問記録登録     | 1日に3件以上の訪問記録を登録できる | □    |
| UAT-002        | Problem/Plan複数登録 | 複数のProblem/Planを登録できる     | □    |
| UAT-003        | 上長コメント機能     | 上長のみがコメントを投稿できる     | □    |
| UAT-004        | 顧客マスタ連携       | 顧客マスタから訪問先を選択できる   | □    |
| UAT-005        | 日報検索機能         | 日付、営業、顧客で検索できる       | □    |
| UAT-006        | 権限制御             | 自分の日報のみ編集可能             | □    |
| UAT-007        | データ整合性         | 日報削除時に関連データも削除される | □    |

---

## 8. 非機能テスト

### 8.1 性能テスト

#### 8.1.1 応答時間テスト

| テストケースID | テスト項目   | 測定対象                          | 目標値 | 確認 |
| -------------- | ------------ | --------------------------------- | ------ | ---- |
| NFT-PERF-001   | ログイン処理 | POST /api/auth/login              | < 1秒  | □    |
| NFT-PERF-002   | 日報一覧取得 | GET /api/daily-reports            | < 3秒  | □    |
| NFT-PERF-003   | 日報詳細取得 | GET /api/daily-reports/{id}       | < 2秒  | □    |
| NFT-PERF-004   | 日報作成     | POST /api/daily-reports           | < 2秒  | □    |
| NFT-PERF-005   | 検索実行     | GET /api/daily-reports?conditions | < 3秒  | □    |

#### 8.1.2 負荷テスト

| テストケースID | テスト項目 | 同時ユーザー数 | 目標値                       | 確認 |
| -------------- | ---------- | -------------- | ---------------------------- | ---- |
| NFT-LOAD-001   | 通常負荷   | 10ユーザー     | すべてのリクエストが正常応答 | □    |
| NFT-LOAD-002   | 高負荷     | 50ユーザー     | 90%以上が3秒以内に応答       | □    |
| NFT-LOAD-003   | ピーク負荷 | 100ユーザー    | エラー率5%以下               | □    |

#### 8.1.3 ストレステスト

| テストケースID | テスト項目 | 条件                 | 目標値               | 確認 |
| -------------- | ---------- | -------------------- | -------------------- | ---- |
| NFT-STRESS-001 | 長時間稼働 | 24時間連続稼働       | メモリリークなし     | □    |
| NFT-STRESS-002 | 大量データ | 10,000件の日報データ | 検索・表示が正常動作 | □    |

### 8.2 セキュリティテスト

#### 8.2.1 認証・認可テスト

| テストケースID | テスト項目          | 確認内容                      | 確認                     |
| -------------- | ------------------- | ----------------------------- | ------------------------ | --- |
| NFT-SEC-001    | SQLインジェクション | 入力フィールドに不正SQL挿入   | 攻撃が無効化される       | □   |
| NFT-SEC-002    | XSS攻撃             | スクリプトタグ挿入            | スクリプトが実行されない | □   |
| NFT-SEC-003    | CSRF対策            | トークンなしでPOST            | リクエストが拒否される   | □   |
| NFT-SEC-004    | パスワード暗号化    | DBのパスワード確認            | ハッシュ化されている     | □   |
| NFT-SEC-005    | HTTPSのみ           | HTTP接続試行                  | HTTPSにリダイレクト      | □   |
| NFT-SEC-006    | トークン有効期限    | 期限切れトークンでAPI呼び出し | 401エラー返却            | □   |
| NFT-SEC-007    | レート制限          | 1時間に1001リクエスト         | 429エラー返却            | □   |

#### 8.2.2 データ保護テスト

| テストケースID | テスト項目               | 確認内容                 | 確認                       |
| -------------- | ------------------------ | ------------------------ | -------------------------- | --- |
| NFT-SEC-010    | 個人情報の暗号化         | DB内の個人情報確認       | 暗号化されている           | □   |
| NFT-SEC-011    | ログの個人情報マスキング | アプリケーションログ確認 | 個人情報がマスクされている | □   |
| NFT-SEC-012    | セッション管理           | ログアウト後のセッション | セッションが無効化される   | □   |

### 8.3 ユーザビリティテスト

| テストケースID | テスト項目               | 確認内容                           | 確認 |
| -------------- | ------------------------ | ---------------------------------- | ---- |
| NFT-USAB-001   | 直感的な操作性           | ユーザーがマニュアルなしで操作可能 | □    |
| NFT-USAB-002   | エラーメッセージの明確性 | エラー原因と対処法が理解できる     | □    |
| NFT-USAB-003   | レスポンシブデザイン     | スマートフォンで正常表示           | □    |
| NFT-USAB-004   | タブレット表示           | タブレットで正常表示               | □    |
| NFT-USAB-005   | キーボード操作           | Tabキーで入力フィールド遷移        | □    |
| NFT-USAB-006   | アクセシビリティ         | スクリーンリーダーで読み上げ可能   | □    |

### 8.4 互換性テスト

#### 8.4.1 ブラウザ互換性

| テストケースID | ブラウザ       | バージョン | 確認 |
| -------------- | -------------- | ---------- | ---- |
| NFT-COMPAT-001 | Google Chrome  | 最新版     | □    |
| NFT-COMPAT-002 | Microsoft Edge | 最新版     | □    |
| NFT-COMPAT-003 | Safari         | 最新版     | □    |
| NFT-COMPAT-004 | Firefox        | 最新版     | □    |

#### 8.4.2 デバイス互換性

| テストケースID | デバイス   | 確認 |
| -------------- | ---------- | ---- |
| NFT-COMPAT-010 | Windows PC | □    |
| NFT-COMPAT-011 | Mac        | □    |
| NFT-COMPAT-012 | iPhone     | □    |
| NFT-COMPAT-013 | Android    | □    |
| NFT-COMPAT-014 | iPad       | □    |

### 8.5 可用性テスト

| テストケースID | テスト項目   | 確認内容                 | 目標値       | 確認 |
| -------------- | ------------ | ------------------------ | ------------ | ---- |
| NFT-AVAIL-001  | 稼働率       | 営業時間内の稼働率       | 99%以上      | □    |
| NFT-AVAIL-002  | バックアップ | データバックアップの実行 | 日次自動実行 | □    |
| NFT-AVAIL-003  | リカバリー   | バックアップからの復旧   | 1時間以内    | □    |

---

## 9. テストデータ

### 9.1 マスタデータ

#### 9.1.1 営業マスタ

| ID  | 氏名      | メールアドレス        | 部署       | 役職 | 上長ID |
| --- | --------- | --------------------- | ---------- | ---- | ------ |
| 1   | 山田 太郎 | yamada@example.com    | 営業第一部 | 一般 | 5      |
| 2   | 鈴木 一郎 | suzuki@example.com    | 営業第一部 | 一般 | 5      |
| 3   | 田中 花子 | tanaka@example.com    | 営業第二部 | 一般 | 6      |
| 4   | 佐藤 次郎 | sato@example.com      | 営業第二部 | 一般 | 6      |
| 5   | 佐藤 課長 | sato-k@example.com    | 営業第一部 | 課長 | 7      |
| 6   | 高橋 課長 | takahashi@example.com | 営業第二部 | 課長 | 7      |
| 7   | 渡辺 部長 | watanabe@example.com  | 営業部     | 部長 | NULL   |

#### 9.1.2 顧客マスタ

| ID  | 顧客名          | 担当者名  | 電話番号     | 住所                      | 業種   |
| --- | --------------- | --------- | ------------ | ------------------------- | ------ |
| 10  | 株式会社ABC商事 | 山田 一郎 | 03-1234-5678 | 東京都千代田区丸の内1-1-1 | 卸売業 |
| 11  | DEF株式会社     | 鈴木 花子 | 03-2345-6789 | 東京都港区六本木1-1-1     | 製造業 |
| 12  | GHI工業株式会社 | 田中 次郎 | 03-3456-7890 | 東京都品川区大井1-1-1     | 製造業 |
| 13  | JKL商事         | 佐藤 美咲 | 03-4567-8901 | 東京都渋谷区渋谷1-1-1     | 小売業 |
| 14  | MNO株式会社     | 高橋 健太 | 03-5678-9012 | 東京都新宿区西新宿1-1-1   | IT業   |

### 9.2 トランザクションデータ（サンプル）

#### 9.2.1 日報データ

| ID  | 営業ID | 報告日     |
| --- | ------ | ---------- |
| 100 | 1      | 2026-02-01 |
| 101 | 1      | 2026-01-31 |
| 102 | 2      | 2026-02-01 |

#### 9.2.2 訪問記録データ

| ID  | 日報ID | 顧客ID | 訪問内容       | 開始時刻 | 終了時刻 |
| --- | ------ | ------ | -------------- | -------- | -------- |
| 200 | 100    | 10     | 新商品プレゼン | 10:00    | 11:30    |
| 201 | 100    | 11     | 定例訪問       | 13:30    | 14:30    |
| 202 | 101    | 12     | 価格交渉       | 14:00    | 16:00    |

#### 9.2.3 Problem/Planデータ

| ID  | 種別    | 日報ID | 内容                            |
| --- | ------- | ------ | ------------------------------- |
| 300 | Problem | 100    | GHI工業との価格交渉について相談 |
| 301 | Plan    | 100    | ABC商事へ見積書提出             |

### 9.3 境界値テストデータ

| テスト項目             | テストデータ     |
| ---------------------- | ---------------- |
| 訪問内容（最大文字数） | 1000文字の文字列 |
| 訪問内容（超過）       | 1001文字の文字列 |
| 日付（未来）           | 2030-12-31       |
| 日付（過去）           | 2020-01-01       |
| コメント（最大文字数） | 1000文字の文字列 |

---

## 10. テスト実施管理

### 10.1 テストスケジュール

| フェーズ       | 期間       | 担当        |
| -------------- | ---------- | ----------- |
| 単体テスト     | 開発と並行 | 開発者      |
| 結合テスト     | 2週間      | 開発者/QA   |
| システムテスト | 2週間      | QA          |
| 受け入れテスト | 1週間      | ユーザー/QA |
| 非機能テスト   | 1週間      | QA          |

### 10.2 バグ管理

バグ管理ツール（例: Jira、Redmine）で以下を記録:

- バグID
- 発見日時
- 発見者
- 深刻度
- 再現手順
- 期待結果と実際の結果
- スクリーンショット
- ステータス（未対応/対応中/修正完了/検証中/クローズ）

### 10.3 テスト完了条件

以下の条件をすべて満たした場合、テスト完了とする:

1. 全テストケースの実施完了
2. 致命的バグ: 0件
3. 重大バグ: 0件
4. 中バグ: すべて修正または次回リリースへの延期承認
5. 軽微バグ: 次回リリースへの延期承認
6. ユーザー受け入れテスト合格
7. 非機能要件の目標値達成

---

## 改訂履歴

| バージョン | 日付       | 作成者 | 変更内容 |
| ---------- | ---------- | ------ | -------- |
| 1.0        | 2026-02-01 | Claude | 初版作成 |
